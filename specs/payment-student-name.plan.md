# 결제 페이지 학생 이름 표시 검증

## Application Overview

학원비수납내역 페이지에서 학생 이름이 올바르게 표시되는지 확인하기 위한 E2E 테스트 계획입니다. 이 테스트는 결제 목록 조회, 학생 이름 표시, 입금내역 추가 다이얼로그, 수정/삭제 기능 등을 검증합니다.

## Test Scenarios

### 1. 결제 목록 조회 및 학생 이름 표시

**Seed:** ``

#### 1.1. 로그인 및 결제 페이지 접근

**File:** `tests/payment-student-name/login-and-navigate.spec.ts`

**Steps:**
  1. http://localhost:3000 페이지로 이동
  2. 로그인 페이지가 표시되는지 확인
  3. '개발자 로그인' 버튼 클릭
  4. 이메일 필드에 'admin@example.com' 자동 입력 확인
  5. 비밀번호 필드에 'password1234' 자동 입력 확인
  6. '로그인' 버튼 클릭
  7. 대시보드 페이지로 리디렉션 확인
  8. 사이드바에서 '학원비수납내역' 메뉴 클릭
  9. 결제 페이지(http://localhost:3000/admin/payments)로 이동 확인

**Expected Results:**
  - 로그인 페이지의 제목이 '학원 관리 시스템 관리자 로그인'으로 표시됨
  - 이메일과 비밀번호가 자동으로 입력됨
  - 로그인 성공 후 대시보드 URL이 '/admin'으로 변경됨
  - 결제 페이지 URL이 '/admin/payments'로 변경됨
  - 페이지 제목이 '학원비수납내역'으로 표시됨

#### 1.2. 결제 목록 테이블 렌더링 확인

**File:** `tests/payment-student-name/table-rendering.spec.ts`

**Steps:**
  1. 로그인 후 결제 페이지로 이동
  2. 페이지 헤더에 '학원비수납내역' 제목 표시 확인
  3. 페이지 설명 '학원비 수납 내역을 관리합니다' 표시 확인
  4. '입금내역 추가' 버튼 표시 확인
  5. 카드 헤더에 '결제 내역 목록' 표시 확인
  6. 총 결제 건수 표시 확인 (예: '총 36건의 결제 내역이 있습니다')
  7. 테이블이 렌더링되는지 확인
  8. 테이블 헤더 컬럼 확인: '학생명', '입금자', '금액', '입금일시', '해당월', '입금방법', '현금영수증', '등록일', '액션'

**Expected Results:**
  - 페이지가 정상적으로 로드됨
  - 모든 UI 요소가 표시됨
  - 테이블에 9개의 컬럼 헤더가 표시됨
  - 결제 건수가 0보다 큼

#### 1.3. 학생 이름 표시 검증

**File:** `tests/payment-student-name/student-name-display.spec.ts`

**Steps:**
  1. 로그인 후 결제 페이지로 이동
  2. 테이블의 첫 번째 행 확인
  3. '학생명' 컬럼(첫 번째 컬럼)에 학생 이름이 표시되는지 확인
  4. 여러 행의 학생 이름 샘플 확인: '전유하', '최원준', '박시은', '문라현', '김세준' 등
  5. 학생 이름이 빈 값이 아닌지 확인
  6. 학생 이름이 한글로 표시되는지 확인
  7. '입금자' 컬럼(두 번째 컬럼)에 입금자 이름 또는 'N/A' 표시 확인
  8. 각 행에 학생 이름과 입금자가 구분되어 표시되는지 확인

**Expected Results:**
  - 모든 결제 항목에 학생 이름이 표시됨
  - 학생 이름은 빈 값이 아님
  - 학생 이름은 한글로 표시됨 (예: '전유하', '최원준')
  - 입금자 컬럼은 입금자 이름 또는 'N/A'로 표시됨 (예: '최승환', 'N/A')
  - 학생 이름과 입금자가 별도 컬럼으로 구분됨

#### 1.4. 결제 데이터 완전성 검증

**File:** `tests/payment-student-name/payment-data-completeness.spec.ts`

**Steps:**
  1. 로그인 후 결제 페이지로 이동
  2. 테이블의 모든 행을 순회하며 각 컬럼 데이터 확인
  3. 각 행의 '학생명' 컬럼에 값이 있는지 확인
  4. 각 행의 '금액' 컬럼에 금액이 표시되는지 확인 (예: '200,000원')
  5. 각 행의 '입금일시' 컬럼에 날짜가 표시되는지 확인 (예: '2026. 01. 12. 12:59')
  6. 각 행의 '해당월' 컬럼에 월 정보가 표시되는지 확인 (예: '1월', '12월')
  7. 각 행의 '입금방법' 컬럼에 방법이 표시되는지 확인 (예: '카드', '무통장')
  8. 각 행의 '현금영수증' 컬럼에 발행 여부가 표시되는지 확인 (예: '아니오')
  9. 각 행의 '등록일' 컬럼에 날짜가 표시되는지 확인
  10. 각 행의 '액션' 컬럼에 수정/삭제 버튼이 표시되는지 확인

**Expected Results:**
  - 모든 행에 학생 이름이 존재함
  - 모든 행에 금액이 올바른 형식으로 표시됨 (숫자 + '원')
  - 모든 행에 날짜가 올바른 형식으로 표시됨
  - 모든 행에 해당월이 표시됨
  - 모든 행에 입금방법이 표시됨
  - 모든 행에 현금영수증 발행 여부가 표시됨
  - 모든 행에 등록일이 표시됨
  - 모든 행에 액션 버튼이 2개씩 표시됨

#### 1.5. 입금내역 추가 다이얼로그 기능

**File:** `tests/payment-student-name/add-payment-dialog.spec.ts`

**Steps:**
  1. 로그인 후 결제 페이지로 이동
  2. '입금내역 추가' 버튼 클릭
  3. 다이얼로그가 열리는지 확인
  4. 다이얼로그 제목 '입금내역 추가' 표시 확인
  5. 다이얼로그 설명 '새로운 입금내역을 추가합니다.' 표시 확인
  6. '학생' 필드(필수) 표시 확인
  7. '학생' 콤보박스의 플레이스홀더 '학생을 선택하세요' 확인
  8. '해당월' 필드(필수) 표시 확인 - 기본값 '1월'
  9. '금액' 필드(필수) 표시 확인 - 플레이스홀더 '금액을 입력하세요'
  10. '입금일시' 필드(필수) 표시 확인 - 기본값 현재 날짜/시간
  11. '입금방법' 필드(필수) 표시 확인 - 기본값 '카드'
  12. '현금영수증 발행여부' 스위치 표시 확인
  13. '입금자' 필드(선택) 표시 확인 - 플레이스홀더 '입금자 이름을 입력하세요'
  14. '취소' 버튼과 '추가' 버튼 표시 확인
  15. 초기 상태에서 '추가' 버튼이 비활성화되어 있는지 확인
  16. 'Close' 버튼(X) 클릭
  17. 다이얼로그가 닫히는지 확인

**Expected Results:**
  - 다이얼로그가 화면 중앙에 표시됨
  - 모든 필드가 올바르게 렌더링됨
  - 필수 필드에 '*' 표시가 있음
  - 학생 선택 전에는 '추가' 버튼이 비활성화됨
  - Close 버튼 클릭 시 다이얼로그가 닫힘

#### 1.6. 학생 이름이 없는 경우 처리

**File:** `tests/payment-student-name/missing-student-name.spec.ts`

**Steps:**
  1. 로그인 후 결제 페이지로 이동
  2. 테이블의 모든 행을 확인
  3. 학생 이름이 null, undefined, 또는 빈 문자열인 행이 있는지 확인
  4. 학생 이름이 없는 경우 어떻게 표시되는지 확인 (예: '-', 'N/A', '알 수 없음' 등)
  5. 현재 데이터셋에서는 모든 행에 학생 이름이 있음을 확인

**Expected Results:**
  - 모든 결제 항목에 학생 이름이 존재함
  - 학생 이름이 없는 경우는 발견되지 않음
  - (만약 학생 이름이 없는 경우) 적절한 대체 텍스트가 표시되어야 함

#### 1.7. 액션 버튼 기능 확인

**File:** `tests/payment-student-name/action-buttons.spec.ts`

**Steps:**
  1. 로그인 후 결제 페이지로 이동
  2. 첫 번째 행(전유하 학생)의 액션 버튼 확인
  3. 수정 버튼(첫 번째 버튼)이 표시되는지 확인
  4. 삭제 버튼(두 번째 버튼)이 표시되는지 확인
  5. 수정 버튼 위에 마우스 호버
  6. 삭제 버튼 위에 마우스 호버
  7. 버튼이 클릭 가능한 상태인지 확인 (cursor: pointer)

**Expected Results:**
  - 각 행에 2개의 액션 버튼이 표시됨
  - 버튼이 아이콘으로 표시됨
  - 버튼에 마우스 오버 시 커서가 포인터로 변경됨
  - 버튼이 클릭 가능한 상태임

#### 1.8. 결제 데이터 정렬 확인

**File:** `tests/payment-student-name/payment-sorting.spec.ts`

**Steps:**
  1. 로그인 후 결제 페이지로 이동
  2. 테이블의 첫 3개 행의 입금일시 확인
  3. 데이터가 최신순으로 정렬되어 있는지 확인 (가장 최근 날짜가 위에 표시)
  4. 첫 번째 행: '전유하' - '2026. 01. 12. 12:59'
  5. 두 번째 행: '최원준' - '2026. 01. 12. 12:57'
  6. 세 번째 행: '박시은' - '2026. 01. 08. 16:11'

**Expected Results:**
  - 결제 내역이 입금일시 기준 최신순으로 정렬됨
  - 가장 최근 결제가 테이블 상단에 표시됨
  - 날짜 형식이 일관성 있게 표시됨 (YYYY. MM. DD. HH:mm)
